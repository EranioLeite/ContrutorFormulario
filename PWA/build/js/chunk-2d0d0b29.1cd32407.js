(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0b29"],{"68a2":function(o,t,a){"use strict";a.r(t);var e=function(){var o=this,t=o.$createElement,a=o._self._c||t;return a("v-content",{staticStyle:{margin:"10px"}},[a("k-loading",{attrs:{title:"Carregando",dialog:o.dialogLoading}}),a("k-dialog",{attrs:{dialog:o.dialogMessage,title:"",text:o.textError},on:{fecharDialog:o.fecharDialogMessage}}),a("k-dialog",{attrs:{dialog:o.visualizarProdutoDialog,title:"Visualizar Produto",text:o.justificativaProduto},on:{fecharDialog:o.fecharVisualizarProdutoDialog}}),a("k-dialog",{attrs:{dialog:o.dialogReprovar,title:"Reprovação Solicitação"},scopedSlots:o._u([{key:"text",fn:function(){return[a("v-text-field",{attrs:{outlined:"",label:"Justificativa *",dense:""},model:{value:o.msgReprovar,callback:function(t){o.msgReprovar=t},expression:"msgReprovar"}})]},proxy:!0},{key:"buttoes",fn:function(){return[a("v-btn",{on:{click:function(t){o.msgReprovar="",o.dialogReprovar=!1}}},[o._v("Cancelar")]),a("v-btn",{on:{click:o.confirmarReprovacao}},[o._v("Confirmar")])]},proxy:!0}])}),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("h2",[o._v("Aprovação")])]),a("v-spacer"),a("v-col",{attrs:{cols:"6",sm:"1"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"#0E6453"},on:{click:function(t){return o.enviarAprovacao(!0)}}},[o._v("Aprovar")])],1),a("v-spacer"),a("v-col",{attrs:{cols:"5",sm:"2"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"#630d24"},on:{click:function(t){return o.enviarAprovacao(!1)}}},[o._v("Reprovar")])],1)],1),a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("h3",[o._v("Requisição")])])],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{attrs:{items:o.itensColaboradores,label:"Colaborador *",autocomplete:"off",readonly:"","item-text":"nome","item-value":"codigo",outlined:"",dense:""},model:{value:o.solicitacao.solicitante,callback:function(t){o.$set(o.solicitacao,"solicitante",t)},expression:"solicitacao.solicitante"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{attrs:{items:o.itensFiliais,label:"Filial *",autocomplete:"off","item-text":"nome",readonly:"","item-value":"codigo",outlined:"",dense:""},model:{value:o.solicitacao.filial,callback:function(t){o.$set(o.solicitacao,"filial",t)},expression:"solicitacao.filial"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{attrs:{items:o.itensCentroCustos,label:"Departamentos *",readonly:"",autocomplete:"off","item-text":"nome","item-value":"codigo",outlined:"",dense:""},model:{value:o.solicitacao.centroCusto,callback:function(t){o.$set(o.solicitacao,"centroCusto",t)},expression:"solicitacao.centroCusto"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-autocomplete",{attrs:{items:o.itensFretes,label:"Frete *",autocomplete:"off",readonly:"","item-text":"nome","item-value":"id",outlined:"",dense:""},model:{value:o.solicitacao.frete,callback:function(t){o.$set(o.solicitacao,"frete",t)},expression:"solicitacao.frete"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("v-text-field",o._g({attrs:{label:"Data Vencimento *",dense:"","append-icon":"mdi-calendar",outlined:"",readonly:""},model:{value:o.solicitacao.dataVencimento,callback:function(t){o.$set(o.solicitacao,"dataVencimento",t)},expression:"solicitacao.dataVencimento"}},o.on))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("h3",[o._v("Detalhes")])])],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-text-field",{staticStyle:{"margin-top":"-10px"},attrs:{outlined:"",label:"Descrição *",readonly:"",dense:""},model:{value:o.solicitacao.descricao,callback:function(t){o.$set(o.solicitacao,"descricao",t)},expression:"solicitacao.descricao"}})],1)],1),a("v-divider"),a("v-row",[a("v-col",{attrs:{cols:"5",sm:"10"}},[a("h3",[o._v("Produtos/Serviços")])]),a("v-spacer")],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("k-data-list",{attrs:{headers:o.headers,itens:o.itens},on:{visualizarProduto:o.visualizarProduto},scopedSlots:o._u([{key:"quantidade",fn:function(t){var e=t.item;return[a("span",[o._v(o._s(e.quantidade)+" ("+o._s(e.um)+")")])]}}])})],1)],1)],1)},i=[],s=a("d4ec"),r=a("bee2"),c=a("99de"),n=a("7e84"),l=a("262e"),d=a("9ab4"),u=a("2b0e"),v=a("b10f"),f=a("823a"),g=a("ecef"),p=a("2fe1"),m=a("e736"),h=a("578a"),w=a("40a2"),_=a("38e9"),b=(a("4de4"),a("4160"),a("ac1f"),a("1276"),a("159b"),a("f175")),k=function(){function o(t){Object(s["a"])(this,o),this._produtos=[{codigo:"",nome:"",um:""}],this._lista=[{numero:"",produto:"",descricao:"",quantidade:"",acao:[new w["b"]("","","","","")]}],this._view=t}return Object(r["a"])(o,[{key:"getProduto",value:function(o){return o?this._produtos.filter((function(t){return t.codigo===o}))[0]:{quantidade:""}}},{key:"carregarDtos",value:function(){var o=this;this._view.loading(!0),b["a"].get("Solicitacao/GetParametros").then((function(t){if(o._view.loading(!1),t.data.sucesso){var a=t.data.tRetorno;o._produtos=a.produtos,o._view.carregarDtos(a.filiais,a.centroCustos,a.produtos,a.fretes,a.colaboradors),o._lista=[]}else o._view.showMsg(t.data.message,0)})).catch((function(t){o._view.loading(!1),o._view.showMsg(t,0)}))}},{key:"enviarAprovacao",value:function(o,t,a,e){var i=this;this._view.loading(!0),b["a"].post("Solicitacao/Aprovacao/"+o,{codAprovador:a,aprovado:t,mensagem:e}).then((function(o){i._view.loading(!1),o.data.sucesso?i._view.showMsg(o.data.message,1):i._view.showMsg(o.data.message,0)})).catch((function(o){i._view.loading(!1),i._view.showMsg(o,0)}))}},{key:"getProdutoForEditar",value:function(o){var t=this;this._view.loading(!0),b["a"].get("Solicitacao/ById/"+o).then((function(o){if(t._view.loading(!1),o.data){o.data.dataVencimento=o.data.dataVencimento.split("T")[0],t._lista=[];var a=1;o.data.itens.forEach((function(o){var e={numero:a.toLocaleString("pt-BR",{minimumIntegerDigits:3}),produto:o.codProduto,descricao:t._produtos.filter((function(t){return t.codigo==o.codProduto}))[0].nome,quantidade:o.quantidade,um:t._produtos.filter((function(t){return t.codigo==o.codProduto}))[0].um,justificativa:o.justificativa,acao:[new w["b"]("mdi-eye","primary","Visualizar","visualizarProduto","200px")]};t._lista.push(e),a++})),t._view.showProdutoForEditar(o.data,t._lista)}else t._view.showMsg("Não encontrado. ",0)})).catch((function(o){t._view.loading(!1),t._view.showMsg(o,0)}))}}]),o}(),y=function(o){function t(){var o;return Object(s["a"])(this,t),o=Object(c["a"])(this,Object(n["a"])(t).apply(this,arguments)),o.dataVencimentoMenu=!1,o.isMobile=!1,o.isSucesso=!1,o.dialogReprovar=!1,o.visualizarProdutoDialog=!1,o.justificativaProduto="",o.msgReprovar="",o.dialogLoading=!1,o.dialogMessage=!1,o.textError="",o.itensFiliais=[],o.itensCentroCustos=[],o.itensProdutos=[{nome:"",codigo:"",quantidade:""}],o.itensFretes=[],o.itensColaboradores=[],o.produtoSelecionado={quantidade:""},o.headers=new _["a"]([new w["a"]("Número","numero",!1,!1),new w["a"]("Produto/Serviço","produto",!1,!1),new w["a"]("Descrição","descricao",!1,!1),new w["a"]("Quantidade","quantidade",!1,!1),new w["a"]("Ação","acao",!0,!1)]),o.idSolicitacao="",o.itens=[{numero:"0",produto:"",descricao:"",quantidade:""}],o.solicitacao={solicitante:"",filial:"",centroCusto:"",frete:"",dataVencimento:"",descricao:"",produtos:o.itens,user:0},o.produto={produto:"",quantidade:""},o}return Object(l["a"])(t,o),Object(r["a"])(t,[{key:"loading",value:function(o){this.dialogLoading=o}},{key:"fecharDialogMessage",value:function(){this.dialogMessage=!1,this.isSucesso&&this.$router.push("/solicitacaoAprovar")}},{key:"showMsg",value:function(o,t){this.textError=o,this.dialogMessage=!0,1==t&&(this.isSucesso=!0)}},{key:"enviarAprovacao",value:function(o){o?this._controller.enviarAprovacao(this.idSolicitacao,!0,parseInt(h["a"].get("User")),""):(this.msgReprovar="",this.dialogReprovar=!0)}},{key:"confirmarReprovacao",value:function(){this.dialogReprovar=!1,this._controller.enviarAprovacao(this.idSolicitacao,!1,parseInt(h["a"].get("User")),this.msgReprovar)}},{key:"showProdutos",value:function(o){this.itens=o}},{key:"visualizarProduto",value:function(o){this.justificativaProduto="Justificativa: "+o.justificativa,this.visualizarProdutoDialog=!0}},{key:"fecharVisualizarProdutoDialog",value:function(){this.visualizarProdutoDialog=!1}},{key:"carregarDtos",value:function(o,t,a,e,i){this.itensFiliais=o,this.itensCentroCustos=t,this.itensProdutos=a,this.itensFretes=e,this.itensColaboradores=i,this.$route.params.id&&(this.idSolicitacao=this.$route.params.id,this._controller.getProdutoForEditar(this.idSolicitacao))}},{key:"showProdutoForEditar",value:function(o,t){this.solicitacao=o,this.itens=t}},{key:"created",value:function(){this._controller=new k(this),this._controller.carregarDtos(),this.isMobile=m["a"].isMobile(),this.itens=[]}}]),t}(u["default"]);y=d["a"]([Object(p["b"])({components:{KLoading:v["a"],KDialog:f["a"],KDataList:g["a"]}})],y);var P=y,x=P,D=a("2877"),S=Object(D["a"])(x,e,i,!1,null,null,null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2d0d0b29.1cd32407.js.map